---
title: Webpack config for Hubspot
image: ./thumb-2.png
imageAlt: Webpack Icon
description: An up-to-date webpack config that works in Hubspot
tags: ["hubspot", "react", "html", "scss", "webpack", "babel", "javascript"]
---

<ul class='parts-list'>
  <li>
    <b>Part 1:</b> Hubspot CMS Boilerplate and Webpack setup
  </li>
  <li>
    <b>Part 2:</b> BabelJS and lint your way forward
  </li>
  <li>
    <b>Part 3:</b> SCSS and image optimization
  </li>
  <li>
    <b>Part 4:</b> Critical CSS path (looking for solutions now,
    <br />
    please message me if you know of any)
  </li>
  <li>
    <b>Part 6:</b> Open questions
  </li>
</ul>

<p>If you want to skip all the fun, here's the code for part 1:</p>

```html
https://github.com/emptypockets-dev/hubspot-with-webpack
```

<h2>Get all the required Hubspot stuff ready</h2>
<p>
  Before you continue, you need to already have Node.js, the Hubspot CLI and a
  developer account.
</p>
<p>Move on when you have all three:</p>
<ul class='parts-list'>
  <li>[x] Hubspot CLI</li>
  <li>[x] Node.js</li>
  <li>[x] Hubspot developer account</li>
</ul>

<h2>Just the boilerplate</h2>
<p>
  Use the Hubspot CLI to create a new project. Follow the Hubspot docs
  <a href='https://github.com/HubSpot/cms-theme-boilerplate'> here</a>. Make sure
  you generally know what's going on, then run this command in Terminalâ€”inside of
  your project folder.
</p>

```
hs create website-theme <a-new-cool-project-name>
```

<p>
  Then configure the project for local development by running `hs-init` in
  Terminal and copying + pasting your key when asked.
</p>

```
hs init
```

<p>
  While you're at it, you'll eventually need a package.json file so run `npm
  init` to create one:
</p>

```js
    npm init
```

<p>
  <em>Note</em>: don't fetch an existing project. We're going to upload our new
  local project to Hubspot.
</p>

<h2>Install dependencies</h2>

```js
npm install --save-dev webpack webpack-cli copy-webpack-plugin @hubspot/webpack-cms-plugins
```

<ul class='parts-list'>
  <li>[x] webpack</li>
  <li>[x] webpack-cli</li>
  <li>[x] copy-webpack-plugin</li>
  <li>[x] @hubspot/webpack-cms-plugins</li>
</ul>

<h2>Create a webpack.config.js</h2>
<p>
  Hubspot provides an&nbsp;
  <a href='https://www.npmjs.com/package/@hubspot/webpack-cms-plugins'>
    example&nbsp;
  </a>
  but at the momen tit needs some tweaks to support Webpack 5 + the required
  plugin updates
</p>

```js
const HubSpotAutoUploadPlugin = require("@hubspot/webpack-cms-plugins/HubSpotAutoUploadPlugin");
const CopyWebpackPlugin = require("copy-webpack-plugin");

module.exports = ({ account, autoupload }) => ({
  entry: "./src/index.js",
  output: {
    filename: "js/main.js",
  },
  plugins: [
    new HubSpotAutoUploadPlugin({
      account,
      autoupload,
      src: "dist",
      dest: "theme-with-webpack",
    }),
    new CopyWebpackPlugin({
      patterns: [
        { from: "src/css", to: "css" },
        { from: "src/images", to: "images" },
        { from: "src/modules", to: "modules" },
        { from: "src/templates", to: "templates" },
        { from: "src/theme.json", to: "theme.json" },
        { from: "src/fields.json", to: "fields.json" },
      ],
    }),
  ],
});
```

<p>
  The above webpack config is the <em>minimum</em> setup needed for the Hubspot
  Autoupload plugin to work.
</p>

<p>
  Add these scripts to your package.json file so that you don't have to keep
  typing webpack --watch --mode etc.
</p>

```
 "scripts": {
        "start": "webpack --watch --mode development --env autoupload",
        "build-dev": "webpack --mode development",
        "build-prod": "webpack --mode production"
    }
```

```
npm start
```

<p>
  Run the start script to kickoff webpack and autoupload. Now, as you save
  files, your site will automatically update with the latest changes
</p>

<p>In part 2, we're going to add Babel and setup lint.</p>
